import { useState, useEffect } from "react";

/**
 * ğŸ“˜ Day 6 í•™ìŠµ ëª©í‘œ (useEffect ì™„ì „ ì´í•´)
 * useEffectëŠ” â€œë Œë”ë§ ì´í›„ì— ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜â€ë‹¤. ì¦‰, í™”ë©´ì´ ê·¸ë ¤ì§„ ë‹¤ìŒ ì‹¤í–‰ë˜ëŠ” â€œë¶€ê°€ ì‘ì—…(side effect)â€ ì²˜ë¦¬ê¸°.
 * 
 *  ğŸ”¥ 1. useEffect ê¸°ë³¸ í˜•íƒœ
    ****************************************************************************************************************
    import { useState, useEffect } from "react";
    useEffect(() => {
      // ì‹¤í–‰ë  ì½”ë“œ
    });
    ****************************************************************************************************************
    í•˜ì§€ë§Œ ì´ë ‡ê²Œ ì“°ë©´ ë Œë”ë§ë  ë•Œë§ˆë‹¤ ë¬´ì¡°ê±´ ì‹¤í–‰ë¨ â†’ ë¹„íš¨ìœ¨. ê·¸ë˜ì„œ ë³´í†µ ì•„ë˜ 2ê°€ì§€ íŒ¨í„´ì´ í•µì‹¬!

    ================================================================================================================

    ğŸ”¥ 2. ì˜ì¡´ì„± ë°°ì—´(deps) 3ê°€ì§€ íŒ¨í„´
    âœ” â‘  ì˜ì¡´ì„± ë°°ì—´ ì—†ìŒ â†’ ë§¤ ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰
    ****************************************************************************************************************
    useEffect(() => {
      console.log("ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ë¨");
    });
    ****************************************************************************************************************
    
    âœ” â‘¡ ë¹ˆ ë°°ì—´ [] â†’ â€œë”± 1ë²ˆë§Œ ì‹¤í–‰â€
    ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë‚˜íƒ€ë‚  ë•Œë§Œ ì‹¤í–‰ë¨.
    ****************************************************************************************************************
    useEffect(() => {
      console.log("ì»´í¬ë„ŒíŠ¸ ì²˜ìŒ ì‹¤í–‰(ë§ˆìš´íŠ¸)ì‹œì—ë§Œ ì‹¤í–‰");
    }, []);
    ****************************************************************************************************************
    ï¼Š ìµœì´ˆ ë°ì´í„° ë¡œë”©
    ï¼Š ì´ˆê¸°ê°’ ì„¤ì •
    ï¼Š ì²˜ìŒ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì‘ì—…

    âœ” â‘¢ íŠ¹ì • ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ì‹¤í–‰    
    ****************************************************************************************************************
    useEffect(() => {
      console.log("textê°€ ë³€í•  ë•Œë§ˆë‹¤ ì‹¤í–‰");
    }, [text]);
    ****************************************************************************************************************
    ï¼Š ì…ë ¥ê°’ ì‹¤ì‹œê°„ ê²€ì¦
    ï¼Š íŠ¹ì • state ë³€í™” ê°ì§€
    ï¼Š API ì¬í˜¸ì¶œ

    ğŸ”¥ 3. í´ë¦°ì—…(cleanup)
    ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ ì‹¤í–‰ë˜ëŠ” ì •ë¦¬ í•¨ìˆ˜.
    ****************************************************************************************************************
    useEffect(() => {
      console.log("êµ¬ë… ì‹œì‘");

      return () => {
        console.log("êµ¬ë… í•´ì œ");
      };
    }, []);
    ****************************************************************************************************************
    ï¼Š ì´ë²¤íŠ¸ë¦¬ìŠ¤ë„ˆ ì œê±°
    ï¼Š íƒ€ì´ë¨¸ ì œê±°
    ï¼Š ì„œë²„ ì—°ê²° í•´ì œ
    
    ================================================================================================================


 * 
 * 
 */
function App() {
  
  const [text, setText] = useState("");
  const [count, setCount] = useState(0);

  // ğŸ”¥ 1. useEffect ê¸°ë³¸ í˜•íƒœ
  useEffect(() => {
    console.log("1. useEffect ê¸°ë³¸ í˜•íƒœ");
  });
  const example = (
    <>
      {count}
    </>
  )

  // ğŸ”¥ 2. ì˜ì¡´ì„± ë°°ì—´(deps) 3ê°€ì§€ íŒ¨í„´
  // state ë³€ê²½ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë  ë•Œ, ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì—ì„œ ì‚¬ë¼ì§ˆ ë•Œ(unmount)
  // ë¹ˆ ë°°ì—´ [] â†’ ë”± 1ë²ˆë§Œ ì‹¤í–‰
  useEffect(() => {
    console.log("ë¹ˆ ë°°ì—´ [] â†’ ë”± 1ë²ˆë§Œ ì‹¤í–‰");
  },[]);

  // íŠ¹ì • ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ì‹¤í–‰    
  useEffect(() => {
    console.log("íŠ¹ì • ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ì‹¤í–‰");
  },[text])

  // 3. í´ë¦°ì—…(cleanup)
  useEffect(() => {
    console.log("êµ¬ë… ì‹œì‘");

    return () => {
      console.log("êµ¬ë… í•´ì œ");
    }
  });   
  
  // 3. í´ë¦°ì—… ì˜ˆì œ 
  useEffect(() => {
    console.log("â± íƒ€ì´ë¨¸ ì‹œì‘");

    const id = setInterval(() => {
      setCount((prev) => prev + 1);
    }, 1000);

    // ğŸ”¥ cleanup: ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ ì‹¤í–‰
    return () => {
      console.log("ğŸ§¹ íƒ€ì´ë¨¸ ì •ë¦¬(cleanup)");
      clearInterval(id);
    };
  }, [count]);

  return example;
}

export default App;